<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>新しいコミュニティを作成 - うちあけ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&family=Klee+One&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: #f7f8fa;
        }
        .font-klee {
            font-family: 'Klee One', cursive;
        }
        .form-label {
            font-size: 1.125rem; /* text-lg */
            font-weight: 700; /* font-bold */
            color: #374151; /* text-gray-700 */
            margin-bottom: 0.5rem;
        }
        .form-input {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid #d1d5db; /* border-gray-300 */
            border-radius: 0.5rem; /* rounded-lg */
            transition: ring 0.2s ease-in-out;
        }
        .form-input:focus {
            outline: none;
            ring: 2px;
            ring-color: #f97316; /* ring-orange-500 */
            border-color: #f97316; /* border-orange-500 */
        }
        .char-counter {
            font-size: 0.875rem;
            color: #6b7280; /* text-gray-500 */
            text-align: right;
            margin-top: 0.25rem;
        }
    </style>
</head>
<body class="text-gray-700">

    <!-- ヘッダーは既存のものを想定 -->
    <header class="sticky top-0 w-full z-40 flex items-center justify-between px-4 py-2 bg-white shadow-md">
         <a class="flex items-center text-gray-800" href="/communities">
            <i class="fas fa-arrow-left mr-4"></i>
            <img alt="うちあけ ロゴ" class="rounded-full shadow-sm" height="40" src="https://placehold.co/40x40/FFDDC1/FF6B35?text=U" width="40" />
            <p class="ml-2 whitespace-nowrap text-orange-500 font-klee text-2xl">うちあけ</p>
        </a>
        <a href="/profile" class="flex items-center gap-2 hover:opacity-80 transition" title="マイページ">
            <img src="https://placehold.co/40x40/a7f3d0/166534?text=A" alt="プロフィール画像" class="w-9 h-9 sm:w-10 sm:h-10 rounded-full border-2 border-orange-200">
        </a>
    </header>

    <main class="container mx-auto max-w-3xl p-4 sm:p-6">

        <!-- ページタイトル -->
        <div class="text-center my-8">
            <h1 class="text-3xl sm:text-4xl font-bold text-gray-800">新しいコミュニティを作成</h1>
            <p class="mt-3 text-gray-600">あなただけの「居場所」を作ってみましょう。</p>
        </div>

        <!-- 作成フォーム -->
        <div class="bg-white p-6 sm:p-8 rounded-2xl shadow-xl">
            <form action="#" method="POST" class="space-y-8">

                <!-- コミュニティ名 -->
                <div>
                    <label for="community-name" class="form-label">コミュニティ名 <span class="text-red-500 text-sm font-medium ml-1">（必須）</span></label>
                    <input type="text" id="community-name" name="community-name" class="form-input" placeholder="例：関節リウマチの情報交換" required maxlength="30">
                    <p class="char-counter"><span id="name-char-count">0</span> / 30</p>
                </div>
                
                <!-- カテゴリ -->
                <div>
                    <label for="community-category" class="form-label">関連カテゴリ <span class="text-red-500 text-sm font-medium ml-1">（必須）</span></label>
                    <select id="community-category" name="community-category" class="form-input bg-white" required>
                        <option value="">カテゴリを選択してください</option>
                        <option>頭・脳・神経</option>
                        <option>耳鼻・口・目</option>
                        <option>手足・肩・腰</option>
                        <option>心臓・肺・気道</option>
                        <option>血管・血液</option>
                        <option>胃・食道・腸</option>
                        <option>肝臓・膵臓・胆嚢</option>
                        <option>腎臓・尿路・尻</option>
                        <option>皮膚・肌・髪</option>
                        <option>骨・関節・筋肉</option>
                        <option>ストレス・睡眠</option>
                        <option>ホルモン・代謝</option>
                        <option>心・精神</option>
                        <option>感染症</option>
                        <option>がん</option>
                        <option>生活習慣病</option>
                        <option>免疫疾患</option>
                        <option>遺伝子疾患</option>
                        <option>男性に多い疾患</option>
                        <option>女性に多い疾患</option>
                        <option>子供に多い疾患</option>
                        <option>その他</option>
                    </select>
                </div>

                <!-- コミュニティの説明 -->
                <div>
                    <label for="community-description" class="form-label">コミュニティの説明 <span class="text-gray-400 text-sm font-medium ml-1">（任意）</span></label>
                    <textarea id="community-description" name="community-description" rows="4" class="form-input" placeholder="例：関節リウマチと診断された方、治療中の方、ご家族の方、どなたでも歓迎です。日々の悩みや治療の工夫など、気軽に話しましょう。" maxlength="200"></textarea>
                    <p class="char-counter"><span id="desc-char-count">0</span> / 200</p>
                </div>

                <!-- ガイドライン同意 -->
                <div class="bg-blue-50 border-l-4 border-blue-400 p-4 rounded-md">
                    <div class="flex items-start">
                        <div class="flex-shrink-0 pt-1">
                            <i class="fas fa-shield-halved text-blue-500"></i>
                        </div>
                        <div class="ml-3">
                            <h3 class="text-sm font-bold text-blue-800">コミュニティ作成のお約束</h3>
                            <div class="mt-2 text-sm text-blue-700">
                                <label for="guideline-agree" class="flex items-center">
                                    <input type="checkbox" id="guideline-agree" name="guideline-agree" class="h-4 w-4 rounded border-gray-300 text-orange-600 focus:ring-orange-500 mr-2">
                                    <span><a href="/guideline" target="_blank" class="font-semibold underline hover:text-blue-800">コミュニティガイドライン</a>を遵守し、健全なコミュニティ運営を心がけます。</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 操作ボタン -->
                <div class="flex flex-col sm:flex-row justify-end items-center gap-4 pt-4 border-t">
                    <a href="#" class="w-full sm:w-auto text-center text-gray-600 font-semibold py-3 px-6 rounded-full hover:bg-gray-100 transition">キャンセル</a>
                    <button type="submit" id="create-community-btn" class="w-full sm:w-auto bg-orange-500 text-white font-bold py-3 px-6 rounded-full transition shadow-md hover:bg-orange-600 disabled:bg-orange-300 disabled:cursor-not-allowed" disabled>
                        この内容でコミュニティを作成する
                    </button>
                </div>
            </form>
        </div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const communityNameInput = document.getElementById('community-name');
            const nameCharCount = document.getElementById('name-char-count');
            const descriptionInput = document.getElementById('community-description');
            const descCharCount = document.getElementById('desc-char-count');
            const categorySelect = document.getElementById('community-category');
            const guidelineAgreeCheckbox = document.getElementById('guideline-agree');
            const createBtn = document.getElementById('create-community-btn');

            // 文字数カウンター
            const updateCharCount = (input, countEl) => {
                countEl.textContent = input.value.length;
            };
            communityNameInput.addEventListener('input', () => updateCharCount(communityNameInput, nameCharCount));
            descriptionInput.addEventListener('input', () => updateCharCount(descriptionInput, descCharCount));

            // 作成ボタンの活性化/非活性化
            const validateForm = () => {
                const isNameValid = communityNameInput.value.trim() !== '';
                const isCategoryValid = categorySelect.value !== '';
                const isAgreed = guidelineAgreeCheckbox.checked;
                createBtn.disabled = !(isNameValid && isCategoryValid && isAgreed);
            };

            communityNameInput.addEventListener('input', validateForm);
            categorySelect.addEventListener('change', validateForm);
            guidelineAgreeCheckbox.addEventListener('change', validateForm);
        });
    </script>

</body>
</html>
