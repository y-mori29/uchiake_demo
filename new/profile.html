<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ã†ã¡ã‚ã‘ - çµ±åˆç‰ˆãƒã‚¤ãƒšãƒ¼ã‚¸</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;600;700&family=Klee+One&display=swap" rel="stylesheet" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <style>
        body { font-family: 'Noto Sans JP', sans-serif; background-color: #f8fafc; }
        .font-klee-one { font-family: 'Klee One', cursive; }
        .post-card-icon { width: 1.25rem; height: 1.25rem; margin-right: 0.25rem; }
        .notification-bell::after { content: attr(data-count); position: absolute; top: -4px; right: -6px; width: 18px; height: 18px; background-color: #ef4444; color: white; border-radius: 50%; font-size: 11px; font-weight: bold; display: flex; align-items: center; justify-content: center; border: 2px solid white; }
        .feed-tab { transition: all 0.3s ease; border-bottom: 3px solid transparent; padding-bottom: 0.75rem; }
        .feed-tab.active { color: #f97316; border-bottom-color: #f97316; }
        .draft-card { background: linear-gradient(135deg, #fffbeb, #fef2f2); border: 2px dashed #fcd34d; }
        .profile-card { background-color: #fff; }
        .stat-item .stat-value { color: #f97316; }
        .mypage-sub-tab { transition: all 0.2s ease; border-bottom: 2px solid transparent; }
        .mypage-sub-tab.active { color: #ea580c; border-bottom-color: #ea580c; }
        .modal-overlay { opacity: 0; visibility: hidden; transition: opacity 0.3s ease-in-out; position: fixed; inset: 0; z-index: 50; display: flex; align-items: center; justify-content: center; padding: 1rem; background-color: rgba(0,0,0,0.6); }
        .modal-overlay.active { opacity: 1; visibility: visible; }
        .modal-content { transform: translateY(20px) scale(0.95); opacity: 0; transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275), opacity 0.3s ease-in-out; max-height: 90vh; overflow-y: auto; background-color: white; border-radius: 1rem; box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25); }
        .modal-overlay.active .modal-content { transform: translateY(0) scale(1); opacity: 1; }
        .custom-checkbox:checked { background-color: #f97316; border-color: #f97316; }
        .custom-checkbox:checked + label { color: #f97316; font-weight: 600; }
        .fab-action { opacity: 0; transform: translateY(20px) scale(0.9); transition: all 0.2s ease-in-out; pointer-events: none; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .fab-action:hover { transform: scale(1.05) !important; box-shadow: 0 6px 20px rgba(0,0,0,0.15); }
        #fab-container.active .fab-action { opacity: 1; transform: translateY(0) scale(1); pointer-events: auto; }
        #fab-toggle .fa-plus { transition: transform 0.3s cubic-bezier(0.68, -0.55, 0.27, 1.55); }
        #fab-container.active #fab-toggle .fa-plus { transform: rotate(45deg); }
        .progress-bar { background-color: #e5e7eb; }
        .progress-bar-inner { background-color: #f97316; transition: width 0.5s ease-in-out; }
        .supporter-condition.completed .action-btn { background-color: #d1fae5; color: #065f46; cursor: default; }
    </style>
</head>
<body class="bg-slate-50 text-gray-800">

    <header class="fixed top-0 w-full z-40 flex items-center justify-between px-4 py-2 bg-white shadow-md">
        <h1 class="flex justify-start text-xl font-bold">
        <a class="flex items-center text-gray-800" href="profile"><img alt="ã†ã¡ã‚ã‘ ãƒ­ã‚´" class="rounded-full shadow-sm" height="40" src="https://placehold.co/40x40/FFDDC1/FF6B35?text=U" width="40" /><p class="ml-2 whitespace-nowrap text-orange-500 font-klee-one text-2xl">ã†ã¡ã‚ã‘</p></a></h1>
        <div class="grow"></div>
        <nav class="flex items-center gap-4 sm:gap-6"><a href="notification" class="relative text-gray-600 hover:text-orange-500 transition notification-bell" data-count="3" title="é€šçŸ¥"><i class="fas fa-bell text-2xl"></i></a>
            <a href="profile" class="flex items-center gap-2 hover:opacity-80 transition" title="ãƒã‚¤ãƒšãƒ¼ã‚¸"><img src="https://placehold.co/40x40/a7f3d0/166534?text=A" alt="ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒ" class="w-9 h-9 sm:w-10 sm:h-10 rounded-full border-2 border-orange-200"><span class="hidden sm:inline font-semibold text-gray-700">ã‚ãªãŸã•ã‚“</span></a></nav>
    </header>

    <main class="pt-[68px]">
        <section class="py-8 px-4"><div class="max-w-4xl mx-auto"><div class="draft-card rounded-xl p-6 text-center shadow-lg transition hover:shadow-xl"><div class="flex flex-col sm:flex-row items-center justify-center gap-4"><div class="text-yellow-500"><i class="fas fa-edit text-4xl"></i></div><div class="text-left"><h2 class="text-xl font-bold text-gray-800">æ›¸ãã‹ã‘ã®æŠ•ç¨¿ãŒã‚ã‚Šã¾ã™</h2><p class="text-gray-600 mt-1">ã€Œã‚¹ãƒˆãƒ¬ãƒ¼ãƒˆãƒãƒƒã‚¯ã«ã‚ˆã‚‹é ­ç—›ã€ã®ç¶šãã‚’æ›¸ãã¾ã›ã‚“ã‹ï¼Ÿ</p></div><a href="new/form" class="mt-3 sm:mt-0 sm:ml-auto w-full sm:w-auto shrink-0 bg-orange-500 text-white font-semibold py-3 px-6 rounded-full shadow hover:bg-orange-600 transition">ç¶šãã‚’æ›¸ã</a></div></div></div></section>
        <section class="my-8 sm:my-12 px-4 sm:px-6">
            <div class="flex justify-center border-b border-gray-200 mb-6 sm:mb-8">
                <button class="feed-tab active text-lg font-semibold py-3 px-4 sm:px-6 text-gray-500" data-tab="mypage"><i class="fas fa-user-circle mr-1 sm:mr-2"></i>ãƒã‚¤ãƒšãƒ¼ã‚¸</button>
                    <a href="community" class="feed-tab text-lg font-semibold py-3 px-4 sm:px-6 text-gray-500 hover:text-orange-500">
                    <i class="fas fa-users mr-1 sm:mr-2"></i>ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£</a>
                <button class="feed-tab text-lg font-semibold py-3 px-4 sm:px-6 text-gray-500" data-tab="for-you"><i class="fas fa-user-check mr-1 sm:mr-2"></i>ã‚ãªãŸã¸</button><button class="feed-tab text-lg font-semibold py-3 px-4 sm:px-6 text-gray-500" data-tab="latest"><i class="fas fa-rss mr-1 sm:mr-2"></i>æœ€æ–°</button></div>
            <div id="feed-content-container" class="max-w-6xl mx-auto">
                <div id="mypage-content" class="main-tab-content"><div class="profile-card max-w-4xl mx-auto p-6 sm:p-8 rounded-xl shadow-lg mb-8 sm:mb-12"><div class="flex flex-col sm:flex-row items-center gap-6"><div class="relative shrink-0"><img src="https://placehold.co/120x120/a7f3d0/166534?text=A" alt="ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒ" class="w-24 h-24 sm:w-32 sm:h-32 rounded-full border-4 border-white shadow-md"><button class="absolute bottom-0 right-0 bg-white w-8 h-8 rounded-full flex items-center justify-center shadow-md hover:bg-gray-100 transition"><i class="fas fa-camera text-gray-600"></i></button></div><div class="text-center sm:text-left w-full"><div class="flex items-center justify-center sm:justify-start gap-4"><h2 class="text-2xl sm:text-3xl font-bold text-gray-800">ã‚ãªãŸã•ã‚“</h2><span id="mypage-supporter-badge" class="bg-amber-100 text-amber-800 text-xs font-bold px-3 py-1 rounded-full shadow-md hidden"><i class="fas fa-crown mr-1"></i>ã‚µãƒãƒ¼ã‚¿ãƒ¼</span></div><p id="mypage-supporter-greeting" class="text-gray-600 text-sm mt-2 hidden">ã„ã¤ã‚‚ã”å”åŠ›ã„ãŸã ãã€ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼</p><p class="text-gray-600 mt-2">ã“ã“ã«è‡ªå·±ç´¹ä»‹æ–‡ãŒå…¥ã‚Šã¾ã™ã€‚åŒã˜æ‚©ã¿ã‚’æŒã¤æ–¹ã¨æƒ…å ±äº¤æ›ã—ãŸã„ã§ã™ã€‚ã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™ã€‚</p><div class="mt-4 flex justify-center sm:justify-start gap-4"><div class="stat-item text-center"><p class="stat-value text-2xl font-bold">12</p><p class="text-xs text-gray-500">ã‚ãªãŸã®æŠ•ç¨¿</p></div><div class="stat-item text-center"><p class="stat-value text-2xl font-bold">158</p><p class="text-xs text-gray-500">ã‚‚ã‚‰ã£ãŸå…±æ„Ÿ</p></div><div class="stat-item text-center"><p class="stat-value text-2xl font-bold">25</p><p class="text-xs text-gray-500">ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯</p></div></div></div>
                <a href="profile-edit" class="shrink-0 mt-4 sm:mt-0 sm:ml-auto w-full sm:w-auto bg-gray-200 text-gray-700 font-semibold py-2 px-5 rounded-full hover:bg-gray-300 transition"><i class="fas fa-cog mr-2"></i>è¨­å®š</a></div></div>
                    <div id="supporter-info-link-section" class="max-w-4xl mx-auto mb-8 sm:mb-12"><div class="bg-gradient-to-r from-amber-100 to-orange-100 p-6 rounded-xl shadow-md transition hover:shadow-lg cursor-pointer" id="open-supporter-info-modal"><div class="flex flex-col sm:flex-row items-center gap-4 text-center sm:text-left"><div class="text-amber-500 text-4xl flex-shrink-0"><i class="fas fa-crown"></i></div><div class="flex-grow"><h3 class="font-bold text-lg text-gray-800">ã†ã¡ã‚ã‘ã‚µãƒãƒ¼ã‚¿ãƒ¼ãƒ—ãƒ­ã‚°ãƒ©ãƒ </h3><p class="text-sm text-gray-600 mt-1">ã‚ãªãŸã®çµŒé¨“ã‚’ã€ã‚‚ã£ã¨æœªæ¥ã®åŒ»ç™‚ã®ãŸã‚ã«å½¹ç«‹ã¦ã¾ã›ã‚“ã‹ï¼Ÿã‚µãƒãƒ¼ã‚¿ãƒ¼ã«ã¤ã„ã¦è©³ã—ãè¦‹ã‚‹</p></div><i class="fas fa-chevron-right text-gray-500 ml-auto hidden sm:block flex-shrink-0"></i></div></div></div>
                    <div id="supporter-benefits-section" class="max-w-4xl mx-auto mb-8 sm:mb-12 hidden"><h3 class="font-bold text-gray-700 mb-3 text-lg">ã‚µãƒãƒ¼ã‚¿ãƒ¼ç‰¹å…¸</h3><div class="space-y-3"><div class="block bg-white p-4 rounded-lg shadow-md border border-gray-200 hover:shadow-lg transition-shadow"><div class="flex items-center gap-4"><i class="fas fa-chart-line text-2xl text-blue-500"></i><div><h4 class="font-semibold text-blue-800">Myãƒšã‚¤ã‚·ã‚§ãƒ³ãƒˆã‚¸ãƒ£ãƒ¼ãƒ‹ãƒ¼</h4><p class="text-sm text-gray-600">ã‚ãªãŸã®æ„Ÿæƒ…ã®æ¨ç§»ã‚’AIãŒåˆ†æãƒ»å¯è¦–åŒ–ã—ã¾ã™ã€‚</p></div></div></div><div class="block bg-gray-100 p-4 rounded-lg shadow-inner border border-gray-200 opacity-70"><div class="flex items-center gap-4"><i class="fas fa-user-md text-2xl text-gray-400"></i><div><h4 class="font-semibold text-gray-500">å°‚é–€å®¶ã¸ã®å„ªå…ˆè³ªå•æ¨©ï¼ˆæº–å‚™ä¸­ï¼‰</h4><p class="text-sm text-gray-500">è–¬å‰¤å¸«ã‚„å°‚é–€å®¶ã¸å„ªå…ˆçš„ã«è³ªå•ã§ãã¾ã™ã€‚</p></div></div></div></div></div>
                    <div class="flex justify-center border-b border-gray-200 mb-6"><button class="mypage-sub-tab active font-semibold py-2 px-5" data-subtab="my-posts">è‡ªåˆ†ã®æŠ•ç¨¿</button><button class="mypage-sub-tab font-semibold py-2 px-5" data-subtab="bookmarks">ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯</button></div>
<div id="mypage-sub-content-container">
    <div id="my-posts-content" class="mypage-sub-content">
        <!-- 
          grid: ã‚°ãƒªãƒƒãƒ‰ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’é©ç”¨
          grid-cols-1: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼ˆãƒ¢ãƒã‚¤ãƒ«ã‚µã‚¤ã‚ºï¼‰ã§ã¯1åˆ—è¡¨ç¤º
          md:grid-cols-2: mediumã‚µã‚¤ã‚ºï¼ˆ768pxï¼‰ä»¥ä¸Šã§ã¯2åˆ—è¡¨ç¤º
          gap-4: ã‚«ãƒ¼ãƒ‰é–“ã®éš™é–“ã‚’èª¿æ•´
        -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 p-2">
            
            <!-- 1ã¤ç›®ã®æŠ•ç¨¿ã‚«ãƒ¼ãƒ‰ -->
            <div class="bg-white rounded-lg shadow-md p-4">
                <h3 class="font-semibold text-gray-800 mb-2 line-clamp-2">ã‚¹ãƒˆãƒ¬ãƒ¼ãƒˆãƒãƒƒã‚¯ã«ã‚ˆã‚‹é ­ç—›</h3>
                <p class="text-xs text-gray-600 mb-3 line-clamp-3">æ™‚ã€…ã€å¾Œé ­éƒ¨ã‚’é‡‘æ§Œã§æ®´ã‚‰ã‚ŒãŸã‚ˆã†ãªç—›ã¿ã«è¥²ã‚ã‚Œã¾ã™ã€‚åŸå› ã¯ã‚¹ãƒˆãƒ¬ãƒ¼ãƒˆãƒãƒƒã‚¯ã§ã—ãŸãŒã€æ²»ç™‚ã§ç—‡çŠ¶ã¯å°‘ã—ãšã¤è½ã¡ç€ã„ã¦ã„ã¾ã™ã€‚</p>
                <div class="flex items-center text-gray-500 text-xs mt-3 border-t pt-3">
                    <span class="flex items-center mr-3"><i class="post-card-icon fas fa-heart text-red-500"></i>45</span>
                    <span class="flex items-center"><i class="post-card-icon fas fa-comment text-blue-500"></i>8</span>
                    <a href="form-edit-talk" class="ml-auto text-xs bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded-full">ç·¨é›†</a>
                </div>
            </div>

            <!-- 2ã¤ç›®ã®æŠ•ç¨¿ã‚«ãƒ¼ãƒ‰ -->
            <div class="bg-white rounded-lg shadow-md p-4">
                <h3 class="font-semibold text-gray-800 mb-2 line-clamp-2">é ­ç—›ã«ã¤ã„ã¦ã®è¨˜éŒ² 2025/8/7</h3>
                <p class="text-xs text-gray-600 mb-3 line-clamp-3">ãƒ»ãƒ­ã‚­ã‚½ãƒ‹ãƒ³ã‚’1éŒ æœç”¨ãƒ»åˆå¾Œã¯å°‘ã—æ¥½ã«ãªã£ãŸ</p>
                <div class="flex items-center text-gray-500 text-xs mt-3 border-t pt-3">
                    <span class="flex items-center mr-3"><i class="post-card-icon fas fa-heart text-red-500"></i>3</span>
                    <span class="flex items-center"><i class="post-card-icon fas fa-comment text-blue-500"></i>2</span>
                    <a href="form-edit-journal" class="ml-auto text-xs bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded-full">ç·¨é›†</a>
                </div>
            </div>

            <!-- 3ã¤ç›®ã®æŠ•ç¨¿ã‚«ãƒ¼ãƒ‰ -->
            <div class="bg-white rounded-lg shadow-md p-4">
                <h3 class="font-semibold text-gray-800 mb-2 line-clamp-2">ç§ã®é–¢ç¯€ãƒªã‚¦ãƒãƒæ²»ç™‚ä½“é¨“è¨˜</h3>
                <p class="text-xs text-gray-600 mb-3 line-clamp-3">ç”Ÿç‰©å­¦çš„è£½å‰¤ã®è‡ªå·±æ³¨å°„ã¨ã€ç—›ã¿æ­¢ã‚ã‚’å‡¦æ–¹ã•ã‚Œã¦ã„ã¾ã™ã€‚å®šæœŸçš„ã«ãƒªãƒãƒ“ãƒªã‚‚è¡Œã£ã¦ã„ã¾ã™ã€‚</p>
                <div class="flex items-center text-gray-500 text-xs mt-3 border-t pt-3">
                    <span class="flex items-center mr-3"><i class="post-card-icon fas fa-heart text-red-500"></i>4</span>
                    <span class="flex items-center"><i class="post-card-icon fas fa-comment text-blue-500"></i>2</span>
                    <a href="form-edit-contribute" class="ml-auto text-xs bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded-full">ç·¨é›†</a>
                </div>
            </div>

        </div>
    </div>
</div>
                    <div class="max-w-4xl mx-auto mt-12"><div class="bg-white p-6 rounded-xl shadow-md border border-gray-200 cursor-pointer transition hover:shadow-lg" id="open-feedback-modal"><div class="flex items-center gap-4"><div class="text-blue-500 text-3xl"><i class="fas fa-lightbulb"></i></div><div><h3 class="font-bold text-gray-800">ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä¸€ç·’ã«è‚²ã¦ã¾ã›ã‚“ã‹ï¼Ÿ</h3><p class="text-sm text-gray-600 mt-1">ã‚ˆã‚Šè‰¯ã„ã‚µãƒ¼ãƒ“ã‚¹ã®ãŸã‚ã€ã‚ãªãŸã®å£°ã‚’ãŠèã‹ã›ãã ã•ã„ã€‚ï¼ˆ1åˆ†ç¨‹åº¦ï¼‰</p></div></div></div></div>
                </div>
                <div id="for-you-content" class="main-tab-content hidden"><div class="text-center mb-6"><p id="interest-categories-text" class="text-gray-500 mb-3">ã‚ãªãŸãŒé–¢å¿ƒã®ã‚ã‚‹ã€Œå¿ƒãƒ»ç²¾ç¥ã€ã€Œã‚¹ãƒˆãƒ¬ã‚¹ãƒ»ç¡çœ ã€ã®æŠ•ç¨¿ã§ã™ã€‚</p><button id="open-category-modal-btn" class="text-sm text-orange-600 font-semibold hover:text-orange-700 transition"><i class="fas fa-cog mr-1"></i>é–¢å¿ƒã‚«ãƒ†ã‚´ãƒªã‚’è¨­å®š</button></div><div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 p-2"><div class="bg-white rounded-lg shadow-md p-4 transition hover:shadow-lg transform hover:-translate-y-1"><h3 class="font-semibold text-base sm:text-lg text-gray-800 mb-2 line-clamp-2">ä¸å®‰ãªæ°—æŒã¡ã¨ã®é—˜ã„</h3><p class="text-xs sm:text-sm text-gray-600 mb-3 line-clamp-3">ã€Œè¨ºæ–­ã‚’å—ã‘ã¦ã‹ã‚‰ã€æ¯æ—¥ãŒä¸å®‰ã§ã„ã£ã±ã„ã§ã™ã€‚ã§ã‚‚ã€ã“ã“ã§åŒã˜ã‚ˆã†ã«é ‘å¼µã£ã¦ã„ã‚‹äººã®æŠ•ç¨¿ã‚’èª­ã‚“ã§ã€å°‘ã—ã ã‘å¿ƒãŒè»½ããªã‚Šã¾ã—ãŸã€‚ã€</p><div class="flex flex-wrap items-center text-gray-500 text-xs mb-3 space-x-2"><span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium">å¿ƒãƒ»ç²¾ç¥</span></div><div class="flex items-center text-gray-500 text-xs mt-3"><span class="mr-3 flex items-center">2025/07/15</span><span class="flex items-center mr-3"><i class="post-card-icon fas fa-heart text-red-500"></i>120</span><span class="flex items-center"><i class="post-card-icon fas fa-comment text-blue-500"></i>35</span></div></div></div></div>
                <div id="latest-content" class="main-tab-content hidden"><div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 p-2"><div class="bg-white rounded-lg shadow-md p-4 text-center">æœ€æ–°ã®æŠ•ç¨¿ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</div></div></div>
            </div>
        </section>
    </main>

    <div id="fab-container" class="fixed bottom-4 right-4 sm:bottom-6 sm:right-6 z-50 flex flex-col items-center gap-3">
        <button id="fab-back" class="fab-action flex h-12 w-12 sm:h-14 sm:w-14 items-center justify-center rounded-full bg-cyan-200 text-gray-800 shadow-lg"><svg class="size-5 sm:size-6" fill="none" stroke="currentColor" stroke-width="2.5" viewbox="0 0 24 24"><path d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18" stroke-linecap="round" stroke-linejoin="round"></path></svg></button>
        <a href="search-user" class="fab-action flex h-12 sm:h-14 items-center justify-center rounded-full bg-amber-500 px-4 sm:px-5 text-sm font-semibold text-white shadow-lg"><span class="mr-2 hidden sm:inline">é–²è¦§</span><i class="fas fa-eye text-lg"></i></a>
        <a href="new/form" class="fab-action flex h-12 sm:h-14 items-center justify-center rounded-full bg-emerald-500 px-4 sm:px-5 text-sm font-semibold text-white shadow-lg"><span class="mr-2 hidden sm:inline">æŠ•ç¨¿</span><i class="fas fa-pencil-alt text-lg"></i></a>
        <button id="fab-toggle" class="flex h-14 w-14 sm:h-16 sm:w-16 items-center justify-center rounded-full bg-orange-500 text-white shadow-lg transition-transform duration-300 ease-in-out hover:scale-110"><i class="fas fa-plus text-2xl"></i></button>
    </div>

    <footer class="mt-8 bg-gray-100 py-6 sm:py-8 text-gray-800">
        <div class="text-center text-xs sm:text-sm text-gray-500">&copy; 2025 ã†ã¡ã‚ã‘ All rights reserved.</div>
    </footer>

    <div id="category-modal-container" class="modal-overlay">
        <div class="modal-content w-full max-w-3xl p-6 sm:p-8">
            <h3 class="text-xl sm:text-2xl font-bold text-gray-800 mb-2">é–¢å¿ƒã®ã‚ã‚‹ã‚«ãƒ†ã‚´ãƒªã‚’é¸æŠ</h3>
            <p class="text-gray-600 text-sm mb-4">é¸æŠã—ãŸã‚«ãƒ†ã‚´ãƒªã®æŠ•ç¨¿ãŒã€Œã‚ãªãŸã¸ã€ã‚¿ãƒ–ã§å„ªå…ˆçš„ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ï¼ˆè¤‡æ•°é¸æŠå¯ï¼‰</p>
            <div class="flex gap-4 mb-4 border-b pb-4">
                <button id="select-all-btn" class="text-sm bg-blue-100 text-blue-700 font-semibold py-1 px-3 rounded-full hover:bg-blue-200 transition">ã™ã¹ã¦é¸æŠ</button>
                <button id="deselect-all-btn" class="text-sm bg-gray-100 text-gray-700 font-semibold py-1 px-3 rounded-full hover:bg-gray-200 transition">ã™ã¹ã¦é¸æŠè§£é™¤</button>
            </div>
            <div id="category-checkbox-grid" class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4 max-h-64 overflow-y-auto pr-2"></div>
            <div class="flex justify-end gap-4 mt-8">
                <button id="close-category-modal-btn" class="bg-gray-200 text-gray-700 font-semibold py-2 px-5 rounded-full hover:bg-gray-300 transition">é–‰ã˜ã‚‹</button>
                <button id="save-categories-btn" class="bg-orange-500 text-white font-semibold py-2 px-5 rounded-full hover:bg-orange-600 transition">ä¿å­˜ã™ã‚‹</button>
            </div>
        </div>
    </div>
    
    <div id="supporter-info-modal" class="modal-overlay">
        <div class="modal-content w-full max-w-2xl p-6 sm:p-8">
            <button id="close-supporter-info-modal" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
            <div class="text-center"><i class="fas fa-crown text-4xl text-amber-400"></i><h2 class="text-2xl font-bold mt-4 text-gray-800">ã†ã¡ã‚ã‘ã‚µãƒãƒ¼ã‚¿ãƒ¼ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã«ã¤ã„ã¦</h2><p class="mt-2 text-gray-600">ã‚ãªãŸã®çµŒé¨“ã¯ã€æœªæ¥ã®åŒ»ç™‚ã«ã¨ã£ã¦ã®è²´é‡ãªè²¡ç”£ã§ã™ã€‚</p></div>
            <div class="mt-8 space-y-6 text-left">
                <div><h3 class="font-bold text-lg text-gray-800">ã‚µãƒãƒ¼ã‚¿ãƒ¼ã¨ã¯ï¼Ÿ</h3><p class="mt-1 text-sm text-gray-600">ã€Œã†ã¡ã‚ã‘ã‚µãƒãƒ¼ã‚¿ãƒ¼ã€ã¨ã¯ã€ã”è‡ªèº«ã®ä½“é¨“ã‚’ã‚ˆã‚Šè©³ã—ãå…±æœ‰ã™ã‚‹ã“ã¨ã§ã€åŒã˜æ‚©ã¿ã‚’æŒã¤æ–¹ã‚„æœªæ¥ã®åŒ»ç™‚ã«ç©æ¥µçš„ã«è²¢çŒ®ã—ã¦ãã ã•ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã“ã¨ã§ã™ã€‚ã‚µãƒãƒ¼ã‚¿ãƒ¼ã¸ã®å‚åŠ ã‚„æ´»å‹•ã¯**ã™ã¹ã¦ç„¡æ–™**ã§ã™ã€‚</p></div>
                <div><h3 class="font-bold text-lg text-gray-800">ã‚µãƒãƒ¼ã‚¿ãƒ¼ã«ãªã‚‹ã«ã¯ï¼Ÿ</h3><p class="mt-1 text-sm text-gray-600 mb-4">ã†ã¡ã‚ã‘ã§ã®æ´»å‹•ã‚’é€šã˜ã¦ã€ä»¥ä¸‹ã®æ¡ä»¶ã‚’æº€ãŸã™ã¨è‡ªå‹•çš„ã«ã‚µãƒãƒ¼ã‚¿ãƒ¼ã¨ã—ã¦èªå®šã•ã‚Œã¾ã™ã€‚</p><div id="supporter-conditions-list" class="space-y-4"></div></div>
                <div><h3 class="font-bold text-lg text-gray-800">ã‚µãƒãƒ¼ã‚¿ãƒ¼ã®ç‰¹å…¸</h3><p class="mt-1 text-sm text-gray-600">ã”å”åŠ›ã¸ã®æ„Ÿè¬ã¨ã—ã¦ã€ç‰¹åˆ¥ãªæ©Ÿèƒ½ã‚’ã”åˆ©ç”¨ã„ãŸã ã‘ã¾ã™ã€‚</p><div class="mt-3 space-y-2"><div class="block bg-blue-50 p-3 rounded-lg"><div class="flex items-center gap-3"><i class="fas fa-chart-line text-xl text-blue-500"></i><div><h4 class="font-semibold text-blue-800 text-sm">Myãƒšã‚¤ã‚·ã‚§ãƒ³ãƒˆã‚¸ãƒ£ãƒ¼ãƒ‹ãƒ¼</h4></div></div></div><div class="block bg-gray-100 p-3 rounded-lg opacity-70"><div class="flex items-center gap-3"><i class="fas fa-user-md text-xl text-gray-400"></i><div><h4 class="font-semibold text-gray-500 text-sm">å°‚é–€å®¶ã¸ã®å„ªå…ˆè³ªå•æ¨©ï¼ˆæº–å‚™ä¸­ï¼‰</h4></div></div></div></div></div>
            </div>
        </div>
    </div>
    
    <div id="feedback-modal" class="modal-overlay">
        <div class="modal-content w-full max-w-lg p-6 sm:p-8">
            <button id="close-feedback-modal" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
            <form id="feedback-form-content"><div class="text-center"><i class="fas fa-lightbulb text-4xl text-blue-500"></i><h2 class="text-2xl font-bold mt-4 text-gray-800">ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä¸€ç·’ã«è‚²ã¦ã¾ã›ã‚“ã‹ï¼Ÿ</h2><p class="mt-2 text-gray-600 text-sm leading-relaxed">ã€Œã†ã¡ã‚ã‘ã€ã¯å§‹ã¾ã£ãŸã°ã‹ã‚Šã®ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚çš†ã•ã‚“ã¨ä¸€ç·’ã«ã€ã‚‚ã£ã¨ä½¿ã„ã‚„ã™ãã€ã‚‚ã£ã¨å¿ƒå®‰ã‚‰ãå ´æ‰€ã«ã—ã¦ã„ããŸã„ã¨æ€ã£ã¦ã„ã¾ã™ã€‚<br><span class="font-bold mt-2 inline-block">ã“ã®ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆã¯åŒ¿åã§é€ä¿¡ã•ã‚Œã€å€‹äººãŒç‰¹å®šã•ã‚Œã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã®ã§ã€ã©ã†ãç‡ç›´ãªã”æ„è¦‹ã‚’ãŠèã‹ã›ãã ã•ã„ã€‚</span></p></div><div class="mt-8 space-y-6 text-left"><div><label class="block text-sm font-bold text-gray-700 mb-2">ç‰¹ã«æ”¹å–„ã—ã¦ã»ã—ã„ç‚¹ã¯ã©ã“ã§ã™ã‹ï¼Ÿï¼ˆè¤‡æ•°é¸æŠå¯ï¼‰</label><div class="space-y-2 text-sm"><label class="flex items-center"><input type="checkbox" class="h-4 w-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500 mr-2">ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ»è¦‹ãŸç›®</label><label class="flex items-center"><input type="checkbox" class="h-4 w-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500 mr-2">æŠ•ç¨¿ãƒ»è¨˜éŒ²ã®ã—ã‚„ã™ã•</label><label class="flex items-center"><input type="checkbox" class="h-4 w-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500 mr-2">æŠ•ç¨¿ã®æ¢ã—ã‚„ã™ã•ï¼ˆæ¤œç´¢æ©Ÿèƒ½ï¼‰</label><label class="flex items-center"><input type="checkbox" class="h-4 w-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500 mr-2">ãƒã‚¤ãƒšãƒ¼ã‚¸æ©Ÿèƒ½</label><label class="flex items-center"><input type="checkbox" class="h-4 w-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500 mr-2">ã‚µãƒãƒ¼ã‚¿ãƒ¼åˆ¶åº¦ã«ã¤ã„ã¦</label><label class="flex items-center"><input type="checkbox" class="h-4 w-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500 mr-2">ãã®ä»–</label></div></div><div><label for="feedback-textarea" class="block text-sm font-bold text-gray-700 mb-2">ã€Œã“ã‚“ãªæ©Ÿèƒ½ãŒã»ã—ã„ã€ã€Œã“ã“ãŒä½¿ã„ã«ãã„ã€ãªã©ã€ã”æ„è¦‹ã‚’è‡ªç”±ã«ãŠèã‹ã›ãã ã•ã„ã€‚</label><textarea id="feedback-textarea" rows="4" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400" placeholder="ä¾‹ï¼šè‡ªåˆ†ã®æŠ•ç¨¿ã«ç”»åƒã‚’è¿½åŠ ã§ãã‚‹ã‚ˆã†ã«ã—ã¦ã»ã—ã„"></textarea></div></div><div class="mt-8 text-center"><button id="submit-feedback-btn" type="submit" class="w-full btn-primary font-bold py-3 px-6 rounded-full transition shadow-md">ã”æ„è¦‹ã‚’é€ã‚‹</button></div></form>
            <div id="feedback-thanks-content" class="text-center hidden"><div class="text-5xl mb-4">ğŸ’Œ</div><h2 class="text-2xl font-bold mt-4 text-gray-800">ã”å”åŠ›ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸï¼</h2><p class="mt-2 text-gray-600 text-sm leading-relaxed">ã„ãŸã ã„ãŸè²´é‡ãªã”æ„è¦‹ã¯ã€ä»Šå¾Œã®ã‚µãƒ¼ãƒ“ã‚¹æ”¹å–„ã®å‚è€ƒã«ã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚</p><div class="mt-8 text-center"><button id="close-thanks-btn" class="w-full btn-secondary font-bold py-3 px-6 rounded-full transition">é–‰ã˜ã‚‹</button></div></div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const state = {
                isSupporter: false, 
                supporterProgress: { 
                    register: 1, setCategory: 0, viewPost: 5,
                    giveEmpathy: 2, contributePost: 0, giveFeedback: 0,
                }
            };
            const supporterGoals = {
                register: 1, setCategory: 1, viewPost: 10,
                giveEmpathy: 5, contributePost: 1, giveFeedback: 1,
            };
            const supporterConditions = [
                { id: 'register', text: 'ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç™»éŒ²ã‚’ã™ã‚‹', icon: 'fa-user-check', actionText: 'é”æˆæ¸ˆã¿', actionTarget: null },
                { id: 'setCategory', text: 'èˆˆå‘³ã®ã‚ã‚‹ã‚«ãƒ†ã‚´ãƒªã‚’è¨­å®šã™ã‚‹', icon: 'fa-tags', actionText: 'è¨­å®šã™ã‚‹', actionTarget: 'category-modal' },
                { id: 'viewPost', text: 'ä»–ã®æ–¹ã®ã†ã¡ã‚ã‘ã‚’è¦‹ã‚‹', icon: 'fa-eye', actionText: 'è¦‹ã«ã„ã', actionTarget: 'latest' },
                { id: 'giveEmpathy', text: 'ä»–ã®æ–¹ã®ã†ã¡ã‚ã‘ã«å…±æ„Ÿãƒœã‚¿ãƒ³ã‚’æŠ¼ã™', icon: 'fa-heart', actionText: 'å…±æ„Ÿã—ã«ã„ã', actionTarget: 'latest' },
                { id: 'contributePost', text: 'ã€ŒçµŒé¨“ã‚’å½¹ç«‹ã¦ã‚‹ã€æŠ•ç¨¿ã‚’ã™ã‚‹', icon: 'fa-hand-holding-heart', actionText: 'æŠ•ç¨¿ã™ã‚‹', actionTarget: 'screen-category-selection' },
                { id: 'giveFeedback', text: 'ã‚µãƒ¼ãƒ“ã‚¹æ”¹å–„ã®ãŠå£°ã‚’ã„ãŸã ã', icon: 'fa-lightbulb', actionText: 'æ„è¦‹ã‚’é€ã‚‹', actionTarget: 'feedback-modal' }
            ];
            const categories = ['é ­ãƒ»è„³ãƒ»ç¥çµŒ','è€³é¼»ãƒ»å£ãƒ»ç›®','æ‰‹è¶³ãƒ»è‚©ãƒ»è…°','å¿ƒè‡“ãƒ»è‚ºãƒ»æ°—é“','è¡€ç®¡ãƒ»è¡€æ¶²','èƒƒãƒ»é£Ÿé“ãƒ»è…¸','è‚è‡“ãƒ»è†µè‡“ãƒ»èƒ†åš¢','è…è‡“ãƒ»å°¿è·¯ãƒ»å°»','çš®è†šãƒ»è‚Œãƒ»é«ª','éª¨ãƒ»é–¢ç¯€ãƒ»ç­‹è‚‰','ã‚¹ãƒˆãƒ¬ã‚¹ãƒ»ç¡çœ ','ãƒ›ãƒ«ãƒ¢ãƒ³ãƒ»ä»£è¬','å¿ƒãƒ»ç²¾ç¥','æ„ŸæŸ“ç—‡','ãŒã‚“','ç”Ÿæ´»ç¿’æ…£ç—…','å…ç–«ç–¾æ‚£','éºä¼å­ç–¾æ‚£','ç”·æ€§ã«å¤šã„ç–¾æ‚£','å¥³æ€§ã«å¤šã„ç–¾æ‚£','å­ä¾›ã«å¤šã„ç–¾æ‚£','ãã®ä»–'];

            const supporterBadge = document.getElementById('mypage-supporter-badge');
            const supporterGreeting = document.getElementById('mypage-supporter-greeting');
            const supporterInfoLink = document.getElementById('supporter-info-link-section');
            const supporterBenefits = document.getElementById('supporter-benefits-section');
            if (state.isSupporter) {
                if(supporterBadge) supporterBadge.classList.remove('hidden');
                if(supporterGreeting) supporterGreeting.classList.remove('hidden');
                if(supporterInfoLink) supporterInfoLink.style.display = 'none'; 
                if(supporterBenefits) supporterBenefits.classList.remove('hidden');
            } else {
                if(supporterBadge) supporterBadge.classList.add('hidden');
                if(supporterGreeting) supporterGreeting.classList.add('hidden');
                if(supporterInfoLink) supporterInfoLink.style.display = 'block';
                if(supporterBenefits) supporterBenefits.classList.add('hidden');
            }

            const supporterModal = document.getElementById('supporter-info-modal');
            const openSupporterModalBtn = document.getElementById('open-supporter-info-modal');
            const closeSupporterModalBtn = document.getElementById('close-supporter-info-modal');
            const supporterConditionsList = document.getElementById('supporter-conditions-list');
            const feedbackModal = document.getElementById('feedback-modal');
            const categoryModalContainer = document.getElementById('category-modal-container');
            const openCategoryModalBtn = document.getElementById('open-category-modal-btn');

            const openSupporterModal = () => {
                supporterConditionsList.innerHTML = ''; 
                supporterConditions.forEach(cond => {
                    const current = state.supporterProgress[cond.id] || 0;
                    const goal = supporterGoals[cond.id];
                    const isCompleted = current >= goal;
                    const progressPercent = Math.min((current / goal) * 100, 100);
                    const completedClass = isCompleted ? 'completed' : '';
                    const actionButtonHTML = isCompleted 
                        ? `<button class="action-btn text-sm font-bold py-2 px-4 rounded-full transition" disabled><i class="fas fa-check-circle mr-2"></i>é”æˆæ¸ˆã¿</button>`
                        : `<button class="action-btn text-sm font-bold bg-orange-100 text-orange-700 hover:bg-orange-200 py-2 px-4 rounded-full transition" data-action-target="${cond.actionTarget}">${cond.actionText}</button>`;

                    const conditionHTML = `<div class="supporter-condition bg-gray-50 p-4 rounded-lg ${completedClass}"><div class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2"><p class="text-sm font-semibold text-gray-800 w-full sm:w-auto"><i class="fas ${cond.icon} fa-fw mr-2 text-gray-500"></i>${cond.text}</p><div class="w-full sm:w-auto flex-shrink-0 mt-2 sm:mt-0">${actionButtonHTML}</div></div>${!isCompleted ? `<div class="flex justify-between items-center text-xs text-gray-500 mt-2"><div class="progress-bar w-full rounded-full h-1.5 flex-1 mr-2"><div class="progress-bar-inner rounded-full h-1.5" style="width: ${progressPercent}%"></div></div><p class="font-medium whitespace-nowrap">ã‚ã¨ ${goal - current} å›</p></div>` : ''}</div>`;
                    supporterConditionsList.innerHTML += conditionHTML;
                });
                
                supporterConditionsList.querySelectorAll('.action-btn[data-action-target]').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const target = e.currentTarget.dataset.actionTarget;
                        closeSupporterModal();
                        if (target === 'latest') {
                            document.querySelector('.feed-tab[data-tab="latest"]').click();
                        } else if (target === 'feedback-modal') {
                            openFeedbackModal();
                        } else if (target === 'category-modal') {
                            openCategoryModal();
                        } else if (target === 'screen-category-selection') {
                            alert('æŠ•ç¨¿ãƒšãƒ¼ã‚¸ã¸é·ç§»ã—ã¾ã™');
                        }
                    });
                });

                supporterModal.classList.add('active');
            };
            const closeSupporterModal = () => supporterModal.classList.remove('active');
            if(openSupporterModalBtn) openSupporterModalBtn.addEventListener('click', openSupporterModal);
            if(closeSupporterModalBtn) closeSupporterModalBtn.addEventListener('click', closeSupporterModal);
            if(supporterModal) supporterModal.addEventListener('click', (e) => { if (e.target === supporterModal) closeSupporterModal(); });

            const openFeedbackModalBtn = document.getElementById('open-feedback-modal');
            const closeFeedbackModalBtn = document.getElementById('close-feedback-modal');
            const feedbackForm = document.getElementById('feedback-form-content');
            const feedbackThanks = document.getElementById('feedback-thanks-content');
            const closeThanksBtn = document.getElementById('close-thanks-btn');
            const openFeedbackModal = () => feedbackModal.classList.add('active');
            const closeFeedbackModal = () => {
                feedbackModal.classList.remove('active');
                setTimeout(() => {
                    if(feedbackForm) feedbackForm.classList.remove('hidden');
                    if(feedbackThanks) feedbackThanks.classList.add('hidden');
                    feedbackModal.querySelector('form')?.reset();
                }, 300);
            };
            if(openFeedbackModalBtn) openFeedbackModalBtn.addEventListener('click', openFeedbackModal);
            if(closeFeedbackModalBtn) closeFeedbackModalBtn.addEventListener('click', closeFeedbackModal);
            if(closeThanksBtn) closeThanksBtn.addEventListener('click', closeFeedbackModal);
            if(feedbackModal) feedbackModal.addEventListener('click', (e) => { if (e.target === feedbackModal) closeFeedbackModal(); });
            if(feedbackForm) feedbackForm.addEventListener('submit', (e) => {
                 e.preventDefault();
                 feedbackForm.classList.add('hidden');
                 feedbackThanks.classList.remove('hidden');
                 state.supporterProgress.giveFeedback = 1;
            });
            
            const fabToggle = document.getElementById('fab-toggle');
            const fabContainer = document.getElementById('fab-container');
            if (fabToggle && fabContainer) {
                fabToggle.addEventListener('click', () => { fabContainer.classList.toggle('active'); });
            }
            document.getElementById('fab-back')?.addEventListener('click', () => { window.history.back(); });

            const mainTabs = document.querySelectorAll('.feed-tab');
            const mainTabContents = document.querySelectorAll('.main-tab-content');
            mainTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    mainTabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    const targetContentId = tab.dataset.tab + '-content';
                    mainTabContents.forEach(content => {
                        content.classList.add('hidden');
                        if (content.id === targetContentId) { content.classList.remove('hidden'); }
                    });
                });
            });

            const mypageSubTabs = document.querySelectorAll('.mypage-sub-tab');
            const mypageSubContents = document.querySelectorAll('.mypage-sub-content');
            mypageSubTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    mypageSubTabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    const targetContentId = tab.dataset.subtab + '-content';
                    mypageSubContents.forEach(content => {
                        content.classList.add('hidden');
                        if (content.id === targetContentId) { content.classList.remove('hidden'); }
                    });
                });
            });

            const closeCategoryModalBtn = document.getElementById('close-category-modal-btn');
            const saveBtn = document.getElementById('save-categories-btn');
            const categoriesText = document.getElementById('interest-categories-text');
            const checkboxGrid = document.getElementById('category-checkbox-grid');
            const selectAllBtn = document.getElementById('select-all-btn');
            const deselectAllBtn = document.getElementById('deselect-all-btn');
            
            const openCategoryModal = () => {
                categoryModalContainer.classList.add('active');
                document.body.style.overflow = 'hidden';
            };
            const closeCategoryModal = () => {
                categoryModalContainer.classList.remove('active');
                document.body.style.overflow = '';
            };
            const saveCategories = () => {
                const checkedCheckboxes = checkboxGrid.querySelectorAll('input[type="checkbox"]:checked');
                const selectedCategories = Array.from(checkedCheckboxes).map(cb => `ã€Œ${cb.value}ã€`);
                if (categoriesText) {
                    categoriesText.textContent = selectedCategories.length > 0 ? `ã‚ãªãŸãŒé–¢å¿ƒã®ã‚ã‚‹${selectedCategories.join('ã€')}ã®æŠ•ç¨¿ã§ã™ã€‚` : 'é–¢å¿ƒã®ã‚ã‚‹ã‚«ãƒ†ã‚´ãƒªã‚’è¨­å®šã™ã‚‹ã¨ã€ã‚ãªãŸã¸ã®ãŠã™ã™ã‚æŠ•ç¨¿ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚';
                }
                closeCategoryModal();
            };

            checkboxGrid.innerHTML = categories.map((cat, index) => {
                const id = `cat-${index + 1}`;
                const isChecked = (cat === 'å¿ƒãƒ»ç²¾ç¥' || cat === 'ã‚¹ãƒˆãƒ¬ã‚¹ãƒ»ç¡çœ ') ? 'checked' : '';
                return `<div class="flex items-center"><input id="${id}" type="checkbox" class="custom-checkbox w-5 h-5 mr-2 rounded" value="${cat}" ${isChecked}><label for="${id}" class="text-gray-700 cursor-pointer">${cat}</label></div>`;
            }).join('');

            if (selectAllBtn) {
                selectAllBtn.addEventListener('click', () => {
                    checkboxGrid.querySelectorAll('input[type="checkbox"]').forEach(checkbox => checkbox.checked = true);
                });
            }
            if (deselectAllBtn) {
                deselectAllBtn.addEventListener('click', () => {
                    checkboxGrid.querySelectorAll('input[type="checkbox"]').forEach(checkbox => checkbox.checked = false);
                });
            }

            if(openCategoryModalBtn) openCategoryModalBtn.addEventListener('click', openCategoryModal);
            if(closeCategoryModalBtn) closeCategoryModalBtn.addEventListener('click', closeCategoryModal);
            if(categoryModalContainer) categoryModalContainer.addEventListener('click', (e) => { if(e.target === categoryModalContainer) closeCategoryModal(); });
            if(saveBtn) saveBtn.addEventListener('click', saveCategories);
        });
    </script>
</body>
</html>