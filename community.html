<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>コミュニティ - うちあけ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&family=Klee+One&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: #f7f8fa;
        }
        .font-klee {
            font-family: 'Klee One', cursive;
        }
        .community-tab {
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }
        .community-tab.active {
            color: #f97316; /* orange-500 */
            border-bottom-color: #f97316;
        }
        .community-card {
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .community-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
        }
        .notification-bell::after {
            content: attr(data-count);
            position: absolute;
            top: -4px;
            right: -6px;
            width: 18px;
            height: 18px;
            background-color: #ef4444; /* red-500 */
            color: white;
            border-radius: 50%;
            font-size: 11px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid white;
        }
    </style>
</head>
<body class="text-gray-700">

    <!-- ヘッダー (ログイン後) -->
    <header class="sticky top-0 w-full z-40 flex items-center justify-between px-4 py-2 bg-white shadow-md">
        <h1 class="flex justify-start text-xl font-bold">
            <a class="flex items-center text-gray-800" href="profile">
                <img alt="うちあけ ロゴ" class="rounded-full shadow-sm" height="40" src="https://placehold.co/40x40/FFDDC1/FF6B35?text=U" width="40" />
                <p class="ml-2 whitespace-nowrap text-orange-500 font-klee text-2xl">うちあけ</p>
            </a>
        </h1>
        <div class="grow"></div>
        <nav class="flex items-center gap-4 sm:gap-6">
            <a href="notification" class="relative text-gray-600 hover:text-orange-500 transition notification-bell" data-count="3" title="通知">
                <i class="fas fa-bell text-2xl"></i>
            </a>
            <a href="profile" class="flex items-center gap-2 hover:opacity-80 transition" title="マイページ">
                <img src="https://placehold.co/40x40/a7f3d0/166534?text=A" alt="プロフィール画像" class="w-9 h-9 sm:w-10 sm:h-10 rounded-full border-2 border-orange-200">
                <span class="hidden sm:inline font-semibold text-gray-700">あなたさん</span>
            </a>
        </nav>
    </header>

    <main class="container mx-auto max-w-5xl p-4 sm:p-6">
        
        <!-- ヒーローセクション -->
        <section class="mb-8 sm:mb-12">
            <div class="bg-gradient-to-r from-orange-100 to-amber-100 p-8 rounded-2xl shadow-lg text-center">
                <i class="fas fa-users text-4xl text-orange-500 mb-4"></i>
                <h1 class="text-2xl sm:text-3xl font-bold text-gray-800 font-klee">うちあけコミュニティ</h1>
                <p class="mt-3 text-gray-700 max-w-2xl mx-auto">同じ病気や悩みを持つ仲間と、もっと深く、安心して語り合える場所。あなたの「居場所」がきっと見つかります。</p>
            </div>
            <!-- ルールとガイドラインへの導線 -->
            <div class="mt-4 text-center">
                <a href="guideline" class="text-sm text-blue-600 hover:underline">
                    <i class="fas fa-shield-halved mr-1"></i>コミュニティの安心安全ガイドライン
                </a>
            </div>
        </section>

        <!-- コミュニティ検索と作成ボタン -->
        <section class="mb-8 flex flex-col sm:flex-row gap-4 justify-between items-center">
             <div class="relative w-full sm:w-auto sm:flex-grow">
                <input type="search" id="community-search" placeholder="コミュニティを探す (例: 関節リウマチ, 30代)" class="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-full focus:ring-2 focus:ring-orange-400">
                <i class="fas fa-search absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"></i>
            </div>
             <a href="new/community" class="w-full sm:w-auto shrink-0 bg-orange-500 text-white font-bold py-3 px-6 rounded-full transition shadow-md hover:bg-orange-600 flex items-center justify-center">
                <i class="fas fa-plus mr-2"></i>
                <span>新しいコミュニティを作る</span>
            </a>
        </section>

        <!-- タブ切り替え -->
        <div class="border-b border-gray-200 mb-8">
            <nav class="flex justify-center -mb-px space-x-4 sm:space-x-8">
                <button class="community-tab active font-semibold text-lg py-3 px-2 sm:px-4 text-gray-500" data-tab="recommended">あなたへのおすすめ</button>
                <button class="community-tab font-semibold text-lg py-3 px-2 sm:px-4 text-gray-500" data-tab="joined">参加中</button>
                <button class="community-tab font-semibold text-lg py-3 px-2 sm:px-4 text-gray-500" data-tab="all">すべてのコミュニティ</button>
            </nav>
        </div>

        <!-- コミュニティ一覧 -->
        <div id="community-list-container">
            <!-- あなたへのおすすめ (初期表示) -->
            <div id="recommended-tab-content" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- おすすめコミュニティカードの例 1 -->
                <div class="community-card bg-white p-6 rounded-2xl shadow-lg border border-transparent flex flex-col">
                    <div class="flex items-center mb-4">
                        <img src="https://placehold.co/64x64/fecaca/991b1b?text=関" class="w-16 h-16 rounded-xl" alt="関節リウマチコミュニティのアイコン">
                        <div class="ml-4">
                            <h2 class="text-lg font-bold text-gray-800">関節リウマチ</h2>
                            <span class="text-sm bg-yellow-100 text-yellow-800 font-semibold px-2 py-0.5 rounded-full">あなたにおすすめ</span>
                        </div>
                    </div>
                    <p class="text-sm text-gray-600 flex-grow">日々の痛みや治療のこと、情報交換しませんか？同じ悩みを持つ仲間が待っています。</p>
                    <div class="flex items-center text-gray-500 text-sm mt-4 pt-4 border-t">
                        <i class="fas fa-user-friends mr-2"></i> 350人
                        <a href="community-detail" class="ml-auto bg-orange-500 text-white font-semibold py-2 px-4 rounded-full text-sm hover:bg-orange-600 transition">参加する</a>
                    </div>
                </div>
                <!-- おすすめコミュニティカードの例 2 -->
                <div class="community-card bg-white p-6 rounded-2xl shadow-lg border border-transparent flex flex-col">
                     <div class="flex items-center mb-4">
                        <img src="https://placehold.co/64x64/dbeafe/1e3a8a?text=心" class="w-16 h-16 rounded-xl" alt="心の健康コミュニティのアイコン">
                        <div class="ml-4">
                            <h2 class="text-lg font-bold text-gray-800">心の健康を考える</h2>
                             <span class="text-sm bg-yellow-100 text-yellow-800 font-semibold px-2 py-0.5 rounded-full">あなたにおすすめ</span>
                        </div>
                    </div>
                    <p class="text-sm text-gray-600 flex-grow">病気と向き合う中での不安やストレス。ここでゆっくり、あなたのペースで話してみませんか。</p>
                    <div class="flex items-center text-gray-500 text-sm mt-4 pt-4 border-t">
                        <i class="fas fa-user-friends mr-2"></i> 1,205人
                        <a href="community-detail" class="ml-auto bg-orange-500 text-white font-semibold py-2 px-4 rounded-full text-sm hover:bg-orange-600 transition">参加する</a>
                    </div>
                </div>
            </div>
            
            <!-- 参加中 (初期は非表示) -->
            <div id="joined-tab-content" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 hidden">
                 <!-- 参加中コミュニティカードの例 -->
                <div class="community-card bg-white p-6 rounded-2xl shadow-lg border border-transparent flex flex-col">
                    <div class="flex items-center mb-4">
                        <img src="https://placehold.co/64x64/fee2e2/b91c1c?text=多" class="w-16 h-16 rounded-xl" alt="多発性骨髄腫コミュニティのアイコン">
                        <div class="ml-4">
                            <h2 class="text-lg font-bold text-gray-800"><a href="community-detail">多発性骨髄腫</a></h2>
                        </div>
                    </div>
                    <p class="text-sm text-gray-600 flex-grow">治療の進捗や副作用について共有し、支え合うコミュニティです。</p>
                    <div class="mt-4 pt-4 border-t">
                         <p class="text-xs text-gray-500 mb-2 font-semibold">
                            <i class="fas fa-fire-alt text-red-500"></i> 新着トピック
                         </p>
                         <a href="topic-detail" class="text-sm text-blue-600 hover:underline line-clamp-1">新しい治療薬の使い心地について</a>
                    </div>
                    <div class="flex items-center text-gray-500 text-sm mt-4">
                        <i class="fas fa-user-friends mr-2"></i> 57人
                        <span class="ml-auto bg-green-100 text-green-800 font-bold py-2 px-4 rounded-full text-sm">参加中</span>
                    </div>
                </div>
            </div>

            <!-- すべてのコミュニティ (初期は非表示) -->
            <div id="all-tab-content" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 hidden">
                <div class="text-center text-gray-500 py-8 col-span-full">すべてのコミュニティがここに表示されます。</div>
            </div>

        </div>

    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const tabs = document.querySelectorAll('.community-tab');
            const tabContents = {
                'recommended': document.getElementById('recommended-tab-content'),
                'joined': document.getElementById('joined-tab-content'),
                'all': document.getElementById('all-tab-content')
            };

            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // タブのアクティブ状態を切り替え
                    tabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');

                    // コンテンツの表示を切り替え
                    const targetTab = tab.dataset.tab;
                    Object.values(tabContents).forEach(content => {
                        if (content) {
                            content.classList.add('hidden');
                        }
                    });
                    if (tabContents[targetTab]) {
                        tabContents[targetTab].classList.remove('hidden');
                    }
                });
            });
        });
    </script>

</body>
</html>
